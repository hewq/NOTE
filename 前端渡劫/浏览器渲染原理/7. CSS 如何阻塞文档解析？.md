在浏览器解析 HTML 文档时，**CSS 的加载和解析会阻塞文档解析**，具体来说，当浏览器遇到 `<link>` 或 `<style>` 标签时，它需要下载并解析 CSS 文件，以便正确计算并应用样式，这会导致浏览器暂停 HTML 文档的解析，直到 CSS 完全加载并应用。

### 为什么 CSS 会阻塞文档解析？

1. **样式影响渲染：** 浏览器需要知道页面的样式才能正确地渲染页面。如果 CSS 样式表未加载，浏览器就无法计算元素的最终显示效果。例如，元素的尺寸、位置、颜色等都受到 CSS 样式的影响。
2. **CSSOM（CSS对象模型）构建：** 浏览器解析 HTML 时，会根据文档中的 `<link>` 和 `<style>` 标签构建 CSSOM（CSS Object Model）。在 CSSOM 完成之前，浏览器无法完全计算出页面元素的布局和样式。
3. **防止 FOUC（闪烁无样式内容）：** 如果 CSS 文件没有完全加载，浏览器可能会在加载过程中先渲染页面内容的默认样式（或无样式），这可能导致页面内容闪烁或显示错误的样式，直到 CSS 完全加载和应用。

### 阻塞的过程

1. **浏览器遇到 <link> 或 <style> 标签时**：浏览器暂停解析 HTML，下载并解析 CSS 文件，直到 CSS 完全解析完毕，才会继续解析后续的 HTML 内容。
2. **样式表解析完毕后**：浏览器会继续解析剩余的 HTML，并结合 CSSOM 来确定每个元素的最终布局和样式。

### 如何避免 CSS 阻塞文档解析？

1. **异步加载 CSS（<link> 标签的 rel="preload"）**： 使用 `rel="preload"` 可以让浏览器预加载 CSS 文件，但不会阻塞文档解析。预加载后，样式会尽早可用，但不会影响 HTML 的解析顺序。

   ```html
   <link rel="preload" href="styles.css" as="style">
   ```

2. **async 和 defer（适用于 JavaScript）**： 虽然 CSS 本身不能像 JavaScript 那样使用 `async` 或 `defer` 属性异步加载，但使用 `rel="preload"` 或使用 `media="print"`（只在打印时应用的 CSS）来延迟 CSS 的应用，也可以避免阻塞。

3. **将 CSS 文件放在页面底部**： 如果无法使用异步加载 CSS，可以将 `<link>` 标签放在 `<body>` 标签的末尾，这样浏览器会优先解析 HTML 结构，避免 CSS 文件下载和解析过早地阻塞页面的渲染。但这种方法会导致页面在加载期间可能会有样式闪烁（FOUC）。

4. **将 CSS 代码内联到页面的 <head> 中**： 如果 CSS 量不大，可以将关键的 CSS 代码直接内联在 HTML 文件中，避免依赖外部 CSS 文件加载，从而加快页面渲染。

   ```html
   <style>
     body { font-family: Arial, sans-serif; }
   </style>
   ```

5. **Critical CSS（关键 CSS）**： 将关键的 CSS（即对页面布局和样式影响最大的部分）内联到 HTML 文件中，并将非关键 CSS 文件延迟加载。这样可以确保页面在加载时有一个基本的样式，而其他样式则可以在页面加载完成后再加载。

   关键 CSS 通常是为了优化首屏加载，减少阻塞渲染时间。

### 总结

CSS 的阻塞性主要来自其对页面渲染的关键作用。浏览器需要确保 CSS 完全加载并解析，才能准确地应用样式和布局。为了避免阻塞渲染，可以采用异步加载、内联样式或关键 CSS 优化等方式，确保页面能尽快渲染并减少用户的等待时间。