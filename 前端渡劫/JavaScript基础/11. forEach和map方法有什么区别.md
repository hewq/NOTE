`forEach` 和 `map` 是 JavaScript 中数组的两个常用方法，它们都可以遍历数组并对每个元素执行指定的操作，但它们在行为和用途上有一些重要的区别。以下是它们的主要区别和使用场景：

### 1. **基本定义**

- **`forEach`**：
  - 用于遍历数组的每个元素，并对每个元素执行给定的函数。
  - 不会返回任何值，返回值始终是 `undefined`。

- **`map`**：
  - 用于遍历数组的每个元素，并将每个元素传递给给定的函数，返回一个新的数组。
  - 新数组的每个元素是由回调函数返回的结果。

### 2. **返回值**

- **`forEach`**：返回 `undefined`。不适用于需要返回新数组的场景。
  
```javascript
const arr = [1, 2, 3];
const result = arr.forEach(num => num * 2);
console.log(result); // undefined
```

- **`map`**：返回一个新数组，包含对原数组每个元素应用回调函数的结果。

```javascript
const arr = [1, 2, 3];
const result = arr.map(num => num * 2);
console.log(result); // [2, 4, 6]
```

### 3. **用法场景**

- **`forEach`**：适合用于需要对数组中的每个元素执行某个操作（如打印、修改外部变量等），但不需要返回新数组的场景。例如，用于迭代并执行副作用操作（如 logging、更新 DOM 等）。

```javascript
const arr = [1, 2, 3];
arr.forEach(num => {
    console.log(num); // 输出每个数字
});
```

- **`map`**：适合用于需要转换数组中的每个元素并生成新数组的场景。例如，将原数组中的每个元素经过某种运算后得到一个新数组。

```javascript
const arr = [1, 2, 3];
const squared = arr.map(num => num * num); // [1, 4, 9]
```

### 4. **可变性**

- **`forEach`**：不会改变原数组（除了在回调函数中显式修改外），但是通常不用于返回新数组。
  
- **`map`**：会返回一个新数组，而原数组保持不变。

### 5. **性能**

- **`forEach`** 和 **`map`** 都是遍历数组的方法，性能差异在绝大多数情况下是微乎其微的，通常不会成为选择的关键因素。选择时更应关注它们的语义和返回值。

### 6. **总结**

- **`forEach`**：
  - 用于遍历数组，对每个元素执行操作。
  - 不返回新数组，返回值为 `undefined`。
  - 适合用于执行副作用操作。

- **`map`**：
  - 用于遍历数组，生成一个新数组。
  - 返回新数组，包含对每个元素应用回调函数的结果。
  - 适合用于转换数组中的每个元素。

选择使用 `forEach` 还是 `map` 取决于你的具体需求：如果需要生成新数组，使用 `map`；如果只是需要遍历并执行操作，则使用 `forEach`。