在 Vue.js 中，当数据发生变化时，它会自动跟踪并更新页面。Vue 通过观察数据变化的方式来实现页面的自动更新，但是数组的变化和对象属性的变化略有不同。Vue 提供了一些方法来操作数组，使它们能够响应式地更新页面。

### 1. Vue 中封装的数组方法

Vue 封装了 JavaScript 的一些原生数组方法，使它们在被调用时会自动触发视图更新。这些方法包括：

- **修改数组的原始方法**：直接改变数组内容并触发视图更新
  - `push()`：在数组末尾添加一个或多个元素
  - `pop()`：移除数组末尾的一个元素
  - `shift()`：移除数组开头的一个元素
  - `unshift()`：在数组开头添加一个或多个元素
  - `splice()`：通过删除、替换或插入特定元素来改变数组内容
  - `sort()`：对数组进行排序
  - `reverse()`：反转数组

这些方法在调用时会触发 Vue 的响应式系统，因为它们是直接对数组进行了修改，Vue 能够捕获这些操作并进行响应式更新。

### 2. Vue 数组更新的实现原理

在 Vue 2 中，Vue 的响应式系统通过 “依赖追踪” 实现。Vue 会在数据更新时自动重新渲染组件。对于数组操作，Vue 封装了数组的部分原型方法，覆盖了原生方法以捕获变化，并触发页面更新。

#### Vue 2 数组更新的工作机制：

- **观察数组**：当数组被定义为响应式属性时，Vue 会给数组添加观察者。
- **封装原生方法**：Vue 对上面的数组方法进行了封装，当这些方法被调用时，Vue 会进行依赖追踪和收集，触发视图更新。
- **手动侦听和更新**：对于 Vue 2 不支持检测的数组变化（如直接设置索引值、修改数组的长度），可以使用 `Vue.set()` 和 `Vue.delete()` 进行手动侦听和更新。

```javascript
// 使用 Vue.set 添加一个索引
Vue.set(array, index, value);
```

#### Vue 3 的 Proxy 实现：

在 Vue 3 中，通过 `Proxy` 实现了响应式系统，克服了 Vue 2 中的一些限制。`Proxy` 可以拦截所有对数组的操作，包括索引设置和长度修改等，因此 Vue 3 中不再需要封装原生数组方法，能够自动侦测所有操作。

### 3. 注意事项

- 在 Vue 2 中，直接通过索引赋值或修改数组的长度，无法触发响应式更新。Vue 3 通过 `Proxy` 改进了这一点。
- 在 Vue 2 中，可通过 `Vue.set()` 和 `Vue.delete()` 来手动修改数据并保持响应式。

### 总结

Vue 封装了常用的数组修改方法，使得这些方法能触发响应式更新，从而保证视图和数据保持同步。通过 Vue 2 中的观察者模式和 Vue 3 的 `Proxy` 特性，Vue 实现了数组数据变化时的自动视图更新，进一步提升了开发效率。