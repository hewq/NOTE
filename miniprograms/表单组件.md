# 组件（[Demo](https://github.com/hewq/wechat-miniprograms/tree/master/html)）

## 表单组件

### button

> 按钮

| 属性名                 | 类型    | 默认值       | 说明                                                         | 生效时机                   | 最低版本 |
| ---------------------- | ------- | ------------ | ------------------------------------------------------------ | -------------------------- | -------- |
| size                   | String  | default      | 按钮的大小                                                   |                            |          |
| type                   | String  | default      | 按钮的样式类型                                               |                            |          |
| plain                  | Boolean | false        | 按钮是否镂空，背景色透明                                     |                            |          |
| disabled               | Boolean | false        | 是否禁用                                                     |                            |          |
| loading                | Boolean | false        | 名称前是否带 loading 图标                                    |                            |          |
| form-type              | String  |              | 用于 `<form/>` 组件，点击分别会触发 `<form/>` 组件的 submit／reset 事件 |                            |          |
| open-type              | String  |              | 微信开放能力                                                 |                            | 1.1.0    |
| hover-class            | String  | button-hover | 指定按钮按下去的样式类。当 `hover-class="none"` 时，没有点击效果 |                            |          |
| Hover-stop-propagation | Boolean | false        | 指定是否阻止本节点的祖先节点出现点击态                       |                            | 1.5.0    |
| hover-start-time       | Number  | 20           | 按住后多久出现点击态，单位毫秒                               |                            |          |
| Hover-stay-time        | Number  | 70           | 手指松开后点击态保留时间，单位毫秒                           |                            |          |
| lang                   | String  | en           | 指定返回用户信息的语言，zh_CN 简体中文，zh_TW 繁体中文， en 英文。 | open-type="getUserInfo"    | 1.3.0    |
| bindgetuserinfo        | Handler |              | 用户点击该按钮时，会返回获取到的用户信息，回调的 detail 数据与 wx.getUserInfo 返回的一致 | open-type="getUserInfo"    | 1.3.0    |
| session-from           | String  |              | 会话来源                                                     | open-type="contact"        | 1.4.0    |
| send-message-title     | String  | 当前标题     | 会话内消息卡片标题                                           | open-type="contact"        | 1.5.0    |
| send-message-path      | String  | 当前分享路径 | 会话内消息卡片点击跳转小程序路径                             | open-type="contact"        | 1.5.0    |
| send-message-img       | String  | 截图         | 会话内消息卡片图片                                           | open-type="contact"        | 1.5.0    |
| show-message-card      | Boolean | false        | 显示会话内消息卡片                                           | open-type="contact"        | 1.5.0    |
| bindcontact            | Handler |              | 客服消息回调                                                 | open-type="contact"        | 1.5.0    |
| bindgetphonenumber     | Handler |              | 获取用户手机号回调                                           | open-type="getPhoneNumber" | 1.2.0    |
| app-parameter          | String  |              | 打开 APP 时，向 APP 传递的参数                               | open-type="launchApp"      | 1.9.5    |
| binderror              | Handler |              | 当使用开放能力时，发生错误的回调                             | open-type="launchApp"      | 1.9.5    |
| bindopensetting        | Handler |              | 在打开授权设置页后回调                                       | open-type="openSetting"    | 2.0.7    |

**size 有效值**

| 值      | 说明 |
| ------- | ---- |
| default |      |
| mini    |      |

**type 有效值**

| 值      | 说明 |
| ------- | ---- |
| primary |      |
| default |      |
| warn    |      |
|         |      |

**form-type 有效值**

| 值     | 说明     |
| ------ | -------- |
| submit | 提交表单 |
| reset  | 重置表单 |

**open-type 有效值**

| 值             | 说明                                                         | 最低版本 |
| -------------- | ------------------------------------------------------------ | -------- |
| contact        | 打开客服会话                                                 | 1.1.0    |
| share          | 触发用户转发，使用前建议先阅读使用指引                       | 1.2.0    |
| getUserInfo    | 获取用户信息，可以从 bindgetuserinfo 回调中获取到用户信息    | 1.3.0    |
| getPhoneNumber | 获取用户手机号，可以从 bindgetphonenumber 回调中获取到用户信息 | 1.2.0    |
| launchApp      | 打开 APP，可以通过 app-parameter 属性设定向 APP 传的参数     | 1.9.5    |
| openSetting    | 打开授权设置页                                               | 2.0.7    |

### checkbox

#### checkbox-group

> 多项选择器，内部由多个 `checkbox` 组成

| 属性名     | 类型        | 默认值 | 说明                                                         |
| ---------- | ----------- | ------ | ------------------------------------------------------------ |
| bindchange | EventHandle |        | `<checkbox-group/>` 中选中项发生改变是触发 change 事件， detail = {value:[选中的 checkbox 的 value 的数组]} |

#### checkbox

> 多选项目。

| 属性名   | 类型    | 默认值 | 说明                                                         |
| -------- | ------- | ------ | ------------------------------------------------------------ |
| value    | String  |        | `<checkbox/>` 标识，选中时触发 `<checkbox-group/>` 的 change 事件，并携带 `<checkbox/>` 的 value。 |
| disabled | Boolean | false  | 是否禁用                                                     |
| checked  | Boolean | false  | 当前是否选中，可用来设置默认选中                             |
| color    | Color   |        | checkbox 的颜色， 同 css 的 color                            |

### form

> 表单，将组件内的用户输入的 `<switch/>` `<input/>` `<checkbox/>` `<slider/>` `<radio/>` `<picker/>` 提交。

当点击 `<form/>` 表单中 formType 为 submit 的 `<button/>` 组件时，会将表单组件中的 value 值进行提交，需要在表单组件中加上 name 来作为 key。

| 属性名        | 类型        | 说明                                                         | 最低版本 |
| ------------- | ----------- | ------------------------------------------------------------ | -------- |
| report-submit | Boolean     | 是否返回 formId 用于发送模板消息                             |          |
| bindsubmit    | EventHandle | 携带 form 中的数据触发 submit 事件，event.detail = {value: {'name': 'value'}, formId: ''} |          |
| bindreset     | EventHandle | 表单重置时会触发 reset 事件                                  |          |

### input

> 输入框

| 属性名            | 类型        | 默认值              | 说明                                                         |
| ----------------- | ----------- | ------------------- | ------------------------------------------------------------ |
| value             | String      |                     | 输入框的初始内容                                             |
| type              | String      | "text"              | input 的类型                                                 |
| password          | Boolean     | false               | 是否是密码类型                                               |
| placeholder       | String      |                     | 输入框为空时占位符                                           |
| placeholder-style | String      |                     | 指定 placeholder 样式                                        |
| placeholder-class | String      | "Input-placeholder" | 指定 placeholder 的样式类                                    |
| disabled          | Boolean     | false               | 是否禁用                                                     |
| maxlength         | Number      | 140                 | 最大输入长度，设置为 -1 的时候不限制最大长度                 |
| cursor-spacing    | Number      | 0                   | 指定光标与键盘的距离，单位 px 。取 input 距离底部的距离和 cursor-spacing 指定的距离的最小值作为光标与键盘的距离。 |
| focus             | Boolean     | false               | 获取焦点                                                     |
| confirm-type      | String      | "done"              | 设置键盘右下角按钮的文字                                     |
| confirm-hold      | Boolean     | false               | 点击键盘右下角按钮时是否保持键盘不收起                       |
| cursor            | Number      |                     | 指定 focus 时的光标位置                                      |
| selection-start   | Number      | -1                  | 光标起始位置，自动聚集时有效，需与 selection-end 搭配使用    |
| selection-end     | Number      | -1                  | 光标结束位置，自动聚焦时有效，需与 selection-start 搭配使用  |
| adjust-position   | Boolean     | true                | 键盘弹起时，是否自动上推页面                                 |
| bindinput         | EventHandle |                     | 输入框聚焦时触发， event.detail = {value, height}, height 为键盘高度，在基础库 1.9.90 起支持 |
| bindblur          | EventHandle |                     | 输入框失去焦点时触发， event.detail = {value: value}         |
| bindconfirm       | EventHandle |                     | 点击完成按钮时触发， event.detail = {value: value}           |

**type 有效值**

| 值     | 说明               |
| ------ | ------------------ |
| text   | 文本输入键盘       |
| number | 数字输入键盘       |
| idcard | 身份证输入键盘     |
| digit  | 带小数点的数字键盘 |

**confirm-type 有效值**

| 值     | 说明                 |
| ------ | -------------------- |
| send   | 右下角按钮为“发送”   |
| search | 右下角按钮为“搜索”   |
| next   | 右下角按钮为“下一个” |
| go     | 右下角按钮为“前往”   |
| done   | 右下角按钮为“完成”   |

**Bug & Tip**

- `bug` : 微信版本 `6.3.30` ， focus 属性设置无效
- `bug` : 微信版本 `6.3.30` ， placeholder 在聚焦时出现重影问题；
- `tip` : input 组件是一个 native 组件，字体是系统字体， 所以无法设置 font-family ；
- `tip` : 在 input 聚焦期间，避免使用 css 动画；